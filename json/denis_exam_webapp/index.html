<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>New York City</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        th{
            color: #048cfb;
            font-weight: 200;
        }
        thead th{
            font-weight: bold;
        }
        figure{
            max-width: 770px; 
        }
        .container-activites{
            text-align: center;
        }
        
        tr{
            display: flex;
            justify-content: space-between;
            border: 1px solid rgb(182, 182, 182);
        }
        th, td{
            border: hidden !important;
        }
        .textefooter{
            border-top: 2px solid rgb(182, 182, 182);
        }
        
        
    </style>
</head>
    <body>
        <!-- NAVIGATION -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand text-light" href="#">Examen de Frederick Denis</a>
            <button class="navbar-toggler btn-light" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="parent-ul d-flex flex-row-reverse col-12">
                    <ul class="navbar-nav">
                        <li class="nav-item active">
                        <a class="nav-link text-light" href="#">New-York<span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link text-light" href="#">Québec</a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link text-light" href="#">Paris</a>
                        </li>
                    </ul>
                </div>
            </div>
          </nav>
        <div class="container-fluid d-flex">
            <div class="row  col-md-12 col-12">
            
                <!-- JUMBOTRON -->

                <div class="jumbotron mt-5 col-12 col-md-8">
                    <h1 class="display-5">New-York</h1>
                    <p><b>New York</b><sup id="cite_ref-2" class="reference"><a href="#cite_note-2"><span class="cite_crochet">[</span>a<span class="cite_crochet">]</span></a></sup> <span class="API nowrap" title="Alphabet phonétique international" style="font-family:'Segoe UI','DejaVu Sans','Lucida Grande','Lucida Sans Unicode','Arial Unicode MS','Hiragino Kaku Gothic Pro',sans-serif;">/<a href="/wiki/API_n" class="mw-redirect" title="API n"><span title="[n] en français « n » dans « nous » ; ailleurs avec la langue un peu plus en arrière.">n</span></a><a href="/wiki/API_u" class="mw-redirect" title="API u"><span title="[u] « ou » dans « coup ».">u</span></a><a href="/wiki/API_%CB%90" class="mw-redirect" title="API ː"><span title="[ː] indique que le son précédent est allongé/géminé.">ː</span></a> <a href="/wiki/API_%CB%88" class="mw-redirect" title="API ˈ"><span title="[ˈ] indique que la syllabe ou voyelle suivante porte l'accent tonique.">ˈ</span></a><a href="/wiki/API_j" class="mw-redirect" title="API j"><span title="[j] « y » dans « payer », « ill » dans « Versailles ».">j</span></a><a href="/wiki/API_%C9%94" class="mw-redirect" title="API ɔ"><span title="[ɔ] « o » dans « sort ».">ɔ</span></a><a href="/wiki/API_%C9%B9" class="mw-redirect" title="API ɹ"><span title="[ɹ] en anglais « r » dans « right ».">ɹ</span></a><a href="/wiki/API_k" class="mw-redirect" title="API k"><span title="[k] « c » dans « cabas ».">k</span></a>/</span><sup id="cite_ref-3" class="reference"><a href="#cite_note-3"><span class="cite_crochet">[</span>b<span class="cite_crochet">]</span></a></sup> <style data-mw-deduplicate="TemplateStyles:r151431917">.mw-parser-output .prononciation>a{background:url("//upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Loudspeaker.svg/11px-Loudspeaker.svg.png")center left no-repeat;padding-left:15px;font-size:smaller}</style><sup class="prononciation noprint"><a href="/wiki/Fichier:En-us-New_York.ogg" title="Fichier:En-us-New York.ogg">Écouter</a></sup>, officiellement nommée <b><span class="lang-en" lang="en">City of New York</span></b>, connue également sous les <a href="/wiki/Noms,_abr%C3%A9viations_des_noms_et_surnoms_de_la_ville_de_New_York" title="Noms, abréviations des noms et surnoms de la ville de New York">noms et abréviations</a> de <b><span class="lang-en" lang="en">New York City</span></b> ou <b><span class="lang-en" lang="en">NYC</span></b>, est la plus grande ville des <a href="/wiki/%C3%89tats-Unis" title="États-Unis">États-Unis</a> en nombre d'habitants et l'une des plus importantes du <a href="/wiki/Am%C3%A9rique" title="Amérique">continent américain</a>.</p>
                    <div class="flexcontainerimage d-flex justify-content-center">
                        <figure class="d-flex flex-column">
                            <img src="img/ny-pano-01.jpg" class="img-fluid" alt="new-york" title="Vue panoramique de la ville de New-York.">
                            <figcaption class="text-right"><small>Source: Wikipédia 2019</small></figcaption>
                        </figure>
                    </div>
                    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">
                        Ouvrir une fenêtre modale
                    </button>
                </div>

                <!-- POPULATION -->
                <div class="aside population col-12 col-md-4">
                    <table class="table mt-5">
                    
                        <tbody>
                            <tr>
                                <th scope="row" class="text-dark m-0 font-weight-bold">Population de New York</th>
                            </tr>
                            <tr>
                                <th>Manhattan</th>
                                <td><span class="badge badge-secondary" id="pop-manhattan"></span></td>
                            </tr>
                            <tr>
                                <th scope="row">Brooklyn</th>
                                <td><span class="badge badge-secondary" id="pop-brooklyn"></span></td>
                            </tr>
                            <tr>
                                <th scope="row">Queens</th>
                                <td><span class="badge badge-secondary" id="pop-queens"></span></td>
                            </tr>
                            <tr>
                                <th scope="row">Bronx</th>
                                <td><span class="badge badge-secondary" id="pop-bronx"></span></td>
                            </tr>
                            <tr>
                                <th scope="row">Staten Island</th>
                                <td><span class="badge badge-secondary" id="pop-statenisland"></span></td>
                            </tr>
                            <tr>
                                <th scope="row" class="text-dark font-weight-bold">Total: </th>
                                <td><span class="badge badge-info" id="pop-total"></span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="container-activites row d-flex col-12 justify-content-around mt-5">
            <div class="activite bg-warning col-5 pt-2 pb-5">
                <h3 id="titrestatue">TEST</h3>
                <p id="descriptionstatue">test</p>
            </div>
            <div class="activite bg-warning col-5 pt-2 pb-5">
                <h3 id="titrecentralpark">TEST</h3>
                <p id="descriptioncentralpark">test</p>
            </div>
        </div>
        <div class="container-activites row d-flex col-12 justify-content-around mt-5">
            <div class="activite bg-warning col-5 pt-2 pb-5">
                <h3 id="titretimessquare">TEST</h3>
                <p id="descriptiontimesquare">test</p>
            </div>
            <div class="activite bg-warning col-5 pt-2 pb-5">
                <h3 id="titreesb">TEST</h3>
                <p id="descriptionesb">test</p>
            </div>
        </div>

        <footer class="footer col-12 mt-5">
            <p class="textefooter pt-3">&copy; 2019. Application interactives (AGW).</p>
        </footer>


        <!-- MODALE -->

        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Vue raprochée de New-York</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <figure>
                        <img src="img/ny-vue-02.jpg" class="img-fluid" alt="vue-ny" title="Vue raprochée de la ville de New-York">
                        <figcaption class="text-right"><small>Source: Wikipédia 2019</small></figcaption>
                    </figure>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                </div>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <script>
            window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
        </script>
        <script src="https://cdn.jsdelivr.net/npm/numbro@2.1.2/dist/numbro.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script>

        /**
        * -------------------------- *
        *       Document ready.
        * -------------------------- *
        */   

        $(document).ready(function() {

            $.ajax({
                "type": "GET",
                "url": "data-ny.json",
                "dataType": "json"
                })
                .done(function(data, textStatus, jqXHR) { // textStatus : success
                
                   
                    // INIT DES VARIABLES 
                    let populationManhattan = data.arrondissements[0].population;
                    let populationBrooklyn = data.arrondissements[1].population;
                    let populationQueens = data.arrondissements[2].population;
                    let populationBronx = data.arrondissements[3].population;
                    let populationStatenIsland = data.arrondissements[4].population;
                    
                    
                    // STATUE DE LA LIBERTÉ
                    let titreStatue = data.activites[0].titre;
                    let descriptionStatue = data.activites[0].description;
                    
                    // CENTRAL PARK
                    let titreCentralPark = data.activites[1].titre;
                    let descriptionCentralPark = data.activites[1].description;
                    
                    // TIMES SQUARE
                    let titreTimesSquare = data.activites[2].titre;
                    let descripionTimesSquare = data.activites[2].description;

                    // EMPIRE STATE BULDIUNG
                    let titreEsb = data.activites[3].titre;
                    let descriptionEsb = data.activites[3].description;

                    
                    // TEST 
                    // console.dir(data);
                    // console.log(populationManhattan);
                    // console.log(populationBrooklyn);
                    // console.log(populationQueens);
                    // console.log(populationBronx);
                    // console.log(populationStatenIsland);
                    // console.log(titreStatue);
                    // console.log(descriptionStatue);
                    
                    
                    // msg = `<h1>Bienvenue à ${nomDeLaVille}. La température est présentement de ${temperature} degrés et le taux d'humidité est à ${humidite}. Le vent souffle à ${vitesseVent} km/h. La tendance est présentement à ${tendance} ${icone}</h1>`
                    
                    document.querySelector("#pop-manhattan").innerHTML += populationManhattan;
                    document.querySelector("#pop-brooklyn").innerHTML += populationBrooklyn;
                    document.querySelector("#pop-queens").innerHTML += populationQueens;
                    document.querySelector("#pop-bronx").innerHTML += populationBronx;
                    document.querySelector("#pop-statenisland").innerHTML += populationStatenIsland;

                    document.querySelector("#titrestatue").innerHTML = titreStatue;
                    document.querySelector("#titrecentralpark").innerHTML = titreCentralPark;
                    document.querySelector("#titretimessquare").innerHTML = titreTimesSquare;
                    document.querySelector("#titreesb").innerHTML = titreEsb;
                    
                    document.querySelector("#descriptionstatue").innerHTML = descriptionStatue;
                    document.querySelector("#descriptioncentralpark").innerHTML = descriptionCentralPark;
                    document.querySelector("#descriptiontimesquare").innerHTML = descripionTimesSquare;
                    document.querySelector("#descriptionesb").innerHTML = descriptionEsb;

                    function transformeEnStringSansEspace(){
                        
                        populationManhattan = populationManhattan.replace(/\s+/g, '');
                        populationBrooklyn = populationBrooklyn.replace(/\s+/g, '');
                        populationQueens = populationQueens.replace(/\s+/g, '');
                        populationBronx = populationBronx.replace(/\s+/g, '');
                        populationStatenIsland = populationStatenIsland.replace(/\s+/g, '');
                        
                    }
                    transformeEnStringSansEspace();
                    
                    function aditionneLesNombres(){
                        
                        let populationTotale = parseFloat(populationManhattan) + parseFloat(populationBrooklyn) + parseFloat(populationQueens) + parseFloat(populationBronx) + parseFloat(populationStatenIsland);

                        document.querySelector("#pop-total").innerHTML += numbro(populationTotale).format({thousandSeparated: true}) + " habitants";
                    }
                    aditionneLesNombres();

                })
                .fail(function(jqXHR, textStatus, errorThrown) { // textStatus : timeout, error, notmodified, parsererror

                    console.log("errorThrown");
                    })

                .always(function(jqXHR, textStatus) {

                    console.log("Fin de l'exécution.");

                    });
                

            }); //ready
        </script>
    </body>
</html>