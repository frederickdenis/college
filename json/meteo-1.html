<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <meta name="description" content="Prototype, Animaux, JSON">
  <meta name="author" content="XM">

  <title>Prototype Animaux | JSON</title>

  <!-- Fontes -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Gafata">

  <!-- Fontes icônes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" />

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <style>
    .contenu {
      margin: 100px 30px 0;
    }

    section {
      margin: 50px 0;
    }

    .taille-plus {
      font-size: 160%;
    }
  </style>
</head>

<body>

  <!-- NAV -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="#">Étude AJAX ($.ajax - Animaux) | B4.</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

  <!-- MAIN -->
  <main class="contenu">
    <section id="bloc-affichage1"></section>

    <section id="bloc-affichage2"></section>

    <a href="javascript:;" class="btn btn-secondary">Génère l'information</a>
  </main>


  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
  </script>

  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <script>
    
    
    /**
    * Transforme le tableau (aime, aime pas) en une chaîne
    * de caractères lisible, séparée par des virgules.
    * @author XM. <courriel.auteur@ok.com>
    * @param {array} a
    * @returns {string}
    */
    function _e(a) {
      console.log("Array : " + a);
      return a.join(", ");
    }

    // const _e = (a) => a.join(", ");

    
    
    
    /**
    * -------------------------- *
    *       Document ready.
    * -------------------------- *
    */   
    $(document).ready(function()
    {


      /**
      * AJAX.
      * Génère une chaîne de caractères à partir de données
      * extraites d'un fichier JSON.
      * @author XM. <courriel.auteur@ok.com>
      */    
      function genereMessage() {

        // Méthode par enchaînement.
        $.ajax({
            "type": "GET",
            "url": "http://api.openweathermap.org/data/2.5/weather?id=6325494&units=metric&APPID=0c98af945c8169d1e0fb538cd4ff153f",
            "dataType": "json"
          })
          .done(function(data, textStatus, jqXHR) { // textStatus : success

            // debugger
            console.log("TextStatus : " + textStatus);
            console.dir(data);
          })

          .fail(function(jqXHR, textStatus, errorThrown) { // textStatus : timeout, error, notmodified, parsererror

            console.log("errorThrown");
          })

          .always(function(jqXHR, textStatus) {

            console.log("Fin de l'exécution.");
            
          });

      }


      $(".btn").on("click", function() {
        genereMessage();
      });

    }); //ready
  </script>

</body>
</html>
